<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Indian Economy & Politics MCQ Quiz</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom styles for the Inter font and overall look */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f2f5; /* Light gray background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
        }
        .quiz-container, .subject-selection-container {
            background-color: #ffffff;
            border-radius: 1rem; /* Rounded corners */
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            padding: 2.5rem; /* Increased padding */
            max-width: 600px;
            width: 100%;
            text-align: center;
            display: flex;
            flex-direction: column;
            gap: 1.5rem; /* Space between elements */
        }
        .question-text {
            font-size: 1.5rem; /* Larger font size */
            font-weight: 600;
            color: #1a202c; /* Darker text */
            margin-bottom: 1.5rem;
        }
        .option-button, .subject-button {
            display: block;
            width: 100%;
            padding: 0.8rem 1.2rem;
            margin-bottom: 0.8rem; /* Space between buttons */
            background-color: #e2e8f0; /* Light gray button */
            color: #2d3748; /* Darker text */
            border: 2px solid #cbd5e0; /* Light border */
            border-radius: 0.75rem; /* Rounded corners */
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.2s ease-in-out;
            text-align: left; /* Align text to left */
        }
        .option-button:hover:not(:disabled), .subject-button:hover {
            background-color: #d1d5db; /* Darker on hover */
            border-color: #a0aec0;
        }
        .option-button:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        .option-button.correct {
            background-color: #a7f3d0; /* Green for correct */
            border-color: #34d399;
            color: #065f46;
        }
        .option-button.incorrect {
            background-color: #fecaca; /* Red for incorrect */
            border-color: #ef4444;
            color: #991b1b;
        }
        .feedback-message {
            margin-top: 1rem;
            font-size: 1.2rem;
            font-weight: 500;
            color: #4a5568;
        }
        .correct-answer-display {
            margin-top: 0.5rem;
            font-size: 1.1rem;
            font-weight: 600;
            color: #059669; /* Green for correct answer text */
        }
        .timer-display {
            font-size: 2rem; /* Larger timer */
            font-weight: 700;
            color: #ef4444; /* Red for timer */
            margin-bottom: 1rem;
        }
        .next-button {
            background-color: #4c51bf; /* Indigo button */
            color: white;
            padding: 0.9rem 1.8rem;
            border-radius: 0.75rem;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.2s ease-in-out;
            border: none;
            margin-top: 1.5rem;
        }
        .next-button:hover:not(:disabled) {
            background-color: #4338ca; /* Darker indigo on hover */
        }
        .next-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        .quiz-finished-message {
            font-size: 1.8rem;
            font-weight: 700;
            color: #059669;
            margin-top: 2rem;
        }
        .quiz-summary {
            text-align: left;
            margin-top: 2rem;
            padding-top: 1.5rem;
            border-top: 1px solid #e2e8f0;
        }
        .quiz-summary p {
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
            color: #2d3748;
        }
        .quiz-summary p span {
            font-weight: 600;
            color: #1a202c;
        }
    </style>
</head>
<body>
    <div class="subject-selection-container" id="subject-selection-container">
        <h1 class="text-3xl font-bold text-gray-800 mb-6">Choose Your Quiz Subject</h1>
        <button id="economy-button" class="subject-button">Indian Economy</button>
        <button id="politics-button" class="subject-button">Indian Politics</button>
        <button id="history-button" class="subject-button">Indian History</button>
        <button id="geography-button" class="subject-button">Geography</button>
    </div>

    <div class="quiz-container" id="quiz-container" style="display: none;">
        <h1 class="text-3xl font-bold text-gray-800 mb-4">📘 Basic Concepts of <span id="quiz-subject-title"></span> (MCQs)</h1>

        <div id="question-display" class="question-text"></div>

        <div id="options-container" class="flex flex-col gap-3">
            <!-- Options will be dynamically inserted here -->
        </div>

        <div id="timer-display" class="timer-display">20</div>

        <div id="feedback-area" class="feedback-message"></div>
        <div id="correct-answer-area" class="correct-answer-display"></div>

        <button id="next-button" class="next-button" disabled>Next Question</button>

        <div id="quiz-summary" class="quiz-summary" style="display: none;">
            <h2 class="text-2xl font-bold text-gray-800 mb-3">Quiz Summary</h2>
            <p>Total Questions Attempted: <span id="attempted-count">0</span></p>
            <p>Correct Answers: <span id="correct-count">0</span></p>
            <p>Incorrect Answers: <span id="incorrect-count">0</span></p>
            <p>Total Time Taken: <span id="total-time">0s</span></p>
            <p>Average Time per Question: <span id="average-time">0s</span></p>
            <button id="restart-quiz-button" class="next-button mt-4">Restart Quiz</button>
        </div>
    </div>

    <script>
        // Array of MCQ questions, now with a 'subject' property
        const allQuestions = [
            {
                subject: "Economy",
                question: "Which sector is known as the backbone of the Indian economy?",
                options: ["Industrial Sector", "Services Sector", "Agricultural Sector", "Public Sector"],
                answer: "Agricultural Sector"
            },
            {
                subject: "Economy",
                question: "India is classified as which type of economy?",
                options: ["Capitalist", "Socialist", "Mixed Economy", "Free Market"],
                answer: "Mixed Economy"
            },
            {
                subject: "Economy",
                question: "Which of the following is a feature of a mixed economy?",
                options: ["Only public sector", "Only private sector", "Coexistence of public and private sectors", "Dominance of foreign sector"],
                answer: "Coexistence of public and private sectors"
            },
            {
                subject: "Economy",
                question: "GDP stands for:",
                options: ["Gross Domestic Price", "Gross Domestic Product", "General Domestic Product", "Global Domestic Production"],
                answer: "Gross Domestic Product"
            },
            {
                subject: "Economy",
                question: "Which organization calculates India’s national income?",
                options: ["RBI", "NITI Aayog", "CSO (now NSO)", "SEBI"],
                answer: "CSO (now NSO)"
            },
            {
                subject: "Economy",
                question: "Which sector contributes the most to India’s GDP currently (as of 2024)?",
                options: ["Agriculture", "Industry", "Services", "Mining"],
                answer: "Services"
            },
            {
                subject: "Economy",
                question: "Which is not a component of national income?",
                options: ["Wages", "Rent", "Black Money", "Profits"],
                answer: "Black Money"
            },
            {
                subject: "Economy",
                question: "The concept of ‘poverty line’ in India is based on:",
                options: ["Wealth", "Employment", "Consumption", "Saving"],
                answer: "Consumption"
            },
            {
                subject: "Economy",
                question: "Per capita income is calculated by:",
                options: ["GDP / Total Employment", "National Income / Total Population", "GNP / Working Population", "GDP / Working Age Population"],
                answer: "National Income / Total Population"
            },
            {
                subject: "Economy",
                question: "Which sector is called the tertiary sector?",
                options: ["Agriculture", "Manufacturing", "Mining", "Services"],
                answer: "Services"
            },
            {
                subject: "Economy",
                question: "Which of the following is a limitation of GDP?",
                options: ["Includes all black money", "Measures only economic activities", "Reflects environmental costs", "Includes unpaid household work"],
                answer: "Measures only economic activities"
            },
            {
                subject: "Economy",
                question: "Which of the following indicates economic growth?",
                options: ["Increase in unemployment", "Increase in GDP", "Decrease in exports", "Decrease in investments"],
                answer: "Increase in GDP"
            },
            {
                subject: "Economy",
                question: "Which index measures inflation at the wholesale level in India?",
                options: ["CPI", "WPI", "IIP", "PMI"],
                answer: "WPI"
            },
            {
                subject: "Economy",
                question: "Who prepares the Economic Survey of India?",
                options: ["RBI", "Ministry of Finance", "Planning Commission", "SEBI"],
                answer: "Ministry of Finance"
            },
            {
                subject: "Economy",
                question: "Which institution manages monetary policy in India?",
                options: ["Ministry of Finance", "NITI Aayog", "RBI", "World Bank"],
                answer: "RBI"
            },
            {
                subject: "Economy",
                question: "Which is not a function of the Reserve Bank of India?",
                options: ["Issuer of currency", "Banker to Government", "Granting subsidies", "Controller of credit"],
                answer: "Granting subsidies"
            },
            {
                subject: "Economy",
                question: "Which term describes the increase in general price level?",
                options: ["Deflation", "Inflation", "Stagflation", "Reflation"],
                answer: "Inflation"
            },
            {
                subject: "Economy",
                question: "The unemployment caused due to change in technology is called:",
                options: ["Structural", "Seasonal", "Cyclical", "Technological"],
                answer: "Technological"
            },
            {
                subject: "Economy",
                question: "Which of the following is a direct tax?",
                options: ["GST", "Customs Duty", "Income Tax", "Excise Duty"],
                answer: "Income Tax"
            },
            {
                subject: "Economy",
                question: "Which of these is a source of non-tax revenue for the government?",
                options: ["Income Tax", "GST", "Dividends from PSUs", "Customs Duty"],
                answer: "Dividends from PSUs"
            },
            // Questions for Indian Politics
            {
                subject: "Politics",
                question: "Who is known as the ‘Father of the Indian Constitution’?",
                options: ["Mahatma Gandhi", "Dr. B.R. Ambedkar", "Jawaharlal Nehru", "Rajendra Prasad"],
                answer: "Dr. B.R. Ambedkar"
            },
            {
                subject: "Politics",
                question: "The Indian Constitution was adopted on:",
                options: ["26 January 1950", "26 November 1949", "15 August 1947", "1 January 1950"],
                answer: "26 November 1949"
            },
            {
                subject: "Politics",
                question: "The idea of the Constitution of India was first mooted by:",
                options: ["The British Parliament", "Indian National Congress", "M.N. Roy", "B.R. Ambedkar"],
                answer: "M.N. Roy"
            },
            {
                subject: "Politics",
                question: "The Constituent Assembly was formed in:",
                options: ["1945", "1946", "1947", "1950"],
                answer: "1946"
            },
            {
                subject: "Politics",
                question: "How many schedules are there in the Indian Constitution?",
                options: ["10", "12", "15", "8"],
                answer: "12"
            },
            // Questions for Indian History
            {
                subject: "History",
                question: "Who built the Red Fort in Delhi?",
                options: ["Akbar", "Shah Jahan", "Aurangzeb", "Humayun"],
                answer: "Shah Jahan"
            },
            {
                subject: "History",
                question: "When did the Battle of Plassey take place?",
                options: ["1757", "1764", "1773", "1857"],
                answer: "1757"
            },
            {
                subject: "History",
                question: "Who was the first Governor-General of Bengal?",
                options: ["Lord William Bentinck", "Lord Dalhousie", "Warren Hastings", "Lord Cornwallis"],
                answer: "Warren Hastings"
            },
            {
                subject: "History",
                question: "The Indus Valley Civilization flourished during which period?",
                options: ["2500-1750 BC", "1500-1000 BC", "600-300 BC", "322-185 BC"],
                answer: "2500-1750 BC"
            },
            {
                subject: "History",
                question: "Who was the founder of the Maurya Empire?",
                options: ["Ashoka", "Chandragupta Maurya", "Bindusara", "Samudragupta"],
                answer: "Chandragupta Maurya"
            },
            // Questions for Geography
            {
                subject: "Geography",
                question: "Which is the highest peak in India?",
                options: ["Mount Everest", "Kanchenjunga", "Nanda Devi", "K2"],
                answer: "Kanchenjunga"
            },
            {
                subject: "Geography",
                question: "Which river is known as the 'Ganga of the South'?",
                options: ["Godavari", "Krishna", "Cauvery", "Narmada"],
                answer: "Godavari"
            },
            {
                subject: "Geography",
                question: "The Tropic of Cancer does NOT pass through which Indian state?",
                options: ["Gujarat", "Rajasthan", "Odisha", "West Bengal"],
                answer: "Odisha"
            },
            {
                subject: "Geography",
                question: "Which Indian state has the longest coastline?",
                options: ["Maharashtra", "Tamil Nadu", "Gujarat", "Andhra Pradesh"],
                answer: "Gujarat"
            },
            {
                subject: "Geography",
                question: "The Thar Desert is located in which part of India?",
                options: ["North-East", "South", "North-West", "Central"],
                answer: "North-West"
            }
        ];

        let questions = []; // This will hold the filtered and shuffled questions for the current quiz
        let currentQuestionIndex = 0;
        let timerInterval;
        const timePerQuestion = 20; // 20 seconds
        let questionStartTime; // To track time taken for each question

        // Quiz statistics
        let correctAnswersCount = 0;
        let incorrectAnswersCount = 0;
        let questionsAttempted = 0;
        let totalTimeTaken = 0; // in seconds

        // Get references to HTML elements
        const subjectSelectionContainer = document.getElementById('subject-selection-container');
        const quizContainer = document.getElementById('quiz-container');
        const economyButton = document.getElementById('economy-button');
        const politicsButton = document.getElementById('politics-button');
        const historyButton = document.getElementById('history-button');
        const geographyButton = document.getElementById('geography-button');

        const quizSubjectTitle = document.getElementById('quiz-subject-title');

        const questionDisplay = document.getElementById('question-display');
        const optionsContainer = document.getElementById('options-container');
        const timerDisplay = document.getElementById('timer-display');
        const feedbackArea = document.getElementById('feedback-area');
        const correctAnswerArea = document.getElementById('correct-answer-area');
        const nextButton = document.getElementById('next-button');
        const quizSummary = document.getElementById('quiz-summary');
        const attemptedCountSpan = document.getElementById('attempted-count');
        const correctCountSpan = document.getElementById('correct-count');
        const incorrectCountSpan = document.getElementById('incorrect-count');
        const totalTimeSpan = document.getElementById('total-time');
        const averageTimeSpan = document.getElementById('average-time');
        let restartQuizButton; // Will be assigned when summary is displayed

        /**
         * Fisher-Yates (Knuth) shuffle algorithm for array randomization.
         * @param {Array} array - The array to shuffle.
         * @returns {Array} The shuffled array.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]]; // Swap elements
            }
            return array;
        }

        /**
         * Initializes the quiz by displaying the subject selection.
         */
        function initQuiz() {
            subjectSelectionContainer.style.display = 'flex'; // Show subject selection
            quizContainer.style.display = 'none'; // Hide quiz
            console.log("Quiz initialized, showing subject selection.");
        }

        /**
         * Starts the quiz with questions filtered and shuffled by the selected subject.
         * @param {string} subject - The selected subject (e.g., "Economy", "Politics", "History", "Geography").
         */
        function startQuiz(subject) {
            console.log(`Starting quiz for subject: ${subject}`);
            // Filter questions based on the selected subject
            questions = allQuestions.filter(q => q.subject === subject);
            // Randomize the order of questions for the selected subject
            questions = shuffleArray(questions);

            // Update quiz title
            quizSubjectTitle.textContent = `${subject}`; // Changed to just subject for cleaner title

            // Reset quiz stats
            currentQuestionIndex = 0;
            correctAnswersCount = 0;
            incorrectAnswersCount = 0;
            questionsAttempted = 0;
            totalTimeTaken = 0;

            // Hide subject selection and show quiz container
            subjectSelectionContainer.style.display = 'none';
            quizContainer.style.display = 'flex';
            quizSummary.style.display = 'none'; // Hide summary at quiz start
            nextButton.style.display = 'block'; // Ensure next button is visible

            displayQuestion();
        }

        /**
         * Displays the current question and its options, and starts the countdown timer.
         */
        function displayQuestion() {
            console.log(`Displaying question ${currentQuestionIndex + 1}/${questions.length}`);
            // Clear previous feedback and options
            optionsContainer.innerHTML = '';
            feedbackArea.textContent = '';
            correctAnswerArea.textContent = '';
            nextButton.disabled = true; // Disable next button until answered or time runs out
            quizSummary.style.display = 'none'; // Ensure summary is hidden when a new question loads

            if (currentQuestionIndex < questions.length) {
                const questionData = questions[currentQuestionIndex];
                questionDisplay.textContent = `${currentQuestionIndex + 1}. ${questionData.question}`;
                timerDisplay.textContent = timePerQuestion; // Reset timer display
                questionStartTime = new Date().getTime(); // Record start time for the question

                // Randomize the order of options for the current question
                const shuffledOptions = shuffleArray([...questionData.options]); // Create a shallow copy before shuffling

                // Create option buttons
                shuffledOptions.forEach(option => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.classList.add('option-button');
                    button.addEventListener('click', () => answerQuestion(option, questionData.answer, button));
                    optionsContainer.appendChild(button);
                });

                startCountdown();
            } else {
                // Quiz finished
                console.log("All questions answered, ending quiz.");
                endQuiz();
            }
        }

        /**
         * Starts the 20-second countdown for the current question.
         */
        function startCountdown() {
            let timeLeft = timePerQuestion;
            timerDisplay.textContent = timeLeft;
            console.log(`Timer started for question ${currentQuestionIndex + 1}, time left: ${timeLeft}`);

            // Clear any existing interval to prevent multiple timers running
            if (timerInterval) {
                clearInterval(timerInterval);
                console.log("Previous timer cleared.");
            }

            timerInterval = setInterval(() => {
                timeLeft--;
                timerDisplay.textContent = timeLeft;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    timerDisplay.textContent = "Time's Up!";
                    console.log("Time's Up for current question.");

                    // If the user hasn't selected an answer when time runs out,
                    // mark it as incorrect and attempted.
                    if (nextButton.disabled) {
                        questionsAttempted++;
                        incorrectAnswersCount++;
                        console.log("Time ran out, no answer selected. Marked as incorrect.");
                    }
                    const currentQuestion = questions[currentQuestionIndex];
                    const timeElapsed = Math.floor((new Date().getTime() - questionStartTime) / 1000);
                    totalTimeTaken += timeElapsed; // Add full time if time's up

                    showAnswer(currentQuestion.answer, null); // Pass null for selected button
                    disableOptions(); // Ensure options are disabled
                    nextButton.disabled = false; // Enable next button
                    console.log("Next button enabled (time out).");
                }
            }, 1000); // Update every 1 second
        }

        /**
         * Handles the user's answer selection.
         * @param {string} selectedOption - The option selected by the user.
         * @param {string} correctAnswer - The correct answer for the current question.
         * @param {HTMLButtonElement} selectedButton - The button element that was clicked.
         */
        function answerQuestion(selectedOption, correctAnswer, selectedButton) {
            console.log(`Answer selected: ${selectedOption}`);
            clearInterval(timerInterval); // Stop the timer
            disableOptions(); // Disable all options once an answer is chosen

            questionsAttempted++;
            const timeElapsed = Math.floor((new Date().getTime() - questionStartTime) / 1000);
            totalTimeTaken += timeElapsed;
            console.log(`Time taken for question: ${timeElapsed}s`);


            if (selectedOption === correctAnswer) {
                feedbackArea.textContent = "✅ Correct!";
                feedbackArea.style.color = '#059669'; // Green color
                if (selectedButton) {
                    selectedButton.classList.add('correct');
                }
                correctAnswersCount++;
                console.log("Answer: Correct!");
            } else {
                feedbackArea.textContent = "❌ Incorrect.";
                feedbackArea.style.color = '#ef4444'; // Red color
                if (selectedButton) {
                    selectedButton.classList.add('incorrect');
                }
                incorrectAnswersCount++;
                console.log("Answer: Incorrect!");
            }
            showAnswer(correctAnswer, selectedButton);
            nextButton.disabled = false; // Enable next button
            console.log("Next button enabled (answer selected).");
        }

        /**
         * Displays the correct answer and highlights the correct option.
         * @param {string} correctAnswer - The correct answer to display.
         * @param {HTMLButtonElement | null} selectedButton - The button selected by the user, or null if time ran out.
         */
        function showAnswer(correctAnswer, selectedButton) {
            correctAnswerArea.textContent = `Correct Answer: ${correctAnswer}`;
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            optionButtons.forEach(button => {
                if (button.textContent === correctAnswer) {
                    // Only add 'correct' class if it wasn't already marked 'incorrect' by the user
                    if (!button.classList.contains('incorrect')) {
                        button.classList.add('correct');
                    }
                }
            });
        }

        /**
         * Disables all option buttons to prevent further selection.
         */
        function disableOptions() {
            const optionButtons = optionsContainer.querySelectorAll('.option-button');
            optionButtons.forEach(button => {
                button.disabled = true;
            });
        }

        /**
         * Ends the quiz and displays the summary statistics.
         */
        function endQuiz() {
            console.log("Ending quiz and showing summary.");
            questionDisplay.textContent = '';
            optionsContainer.innerHTML = '<p class="quiz-finished-message">Quiz Finished! Well done!</p>';
            timerDisplay.textContent = '';
            feedbackArea.textContent = '';
            correctAnswerArea.textContent = '';
            nextButton.style.display = 'none'; // Hide next button

            // Display summary
            attemptedCountSpan.textContent = questionsAttempted;
            correctCountSpan.textContent = correctAnswersCount;
            incorrectCountSpan.textContent = incorrectAnswersCount;
            totalTimeSpan.textContent = `${totalTimeTaken}s`;

            const averageTime = questionsAttempted > 0 ? (totalTimeTaken / questionsAttempted).toFixed(2) : 0;
            averageTimeSpan.textContent = `${averageTime}s`;
            quizSummary.style.display = 'block'; // Show the summary section

            // Get the restart button and attach event listener
            restartQuizButton = document.getElementById('restart-quiz-button');
            if (restartQuizButton) {
                restartQuizButton.addEventListener('click', initQuiz); // Go back to subject selection
                console.log("Restart quiz button listener attached.");
            }
        }

        /**
         * Moves to the next question or ends the quiz if all questions are answered.
         */
        nextButton.addEventListener('click', () => {
            console.log("Next button clicked. Moving to next question.");
            currentQuestionIndex++;
            displayQuestion();
        });

        // Event listeners for subject selection buttons
        economyButton.addEventListener('click', () => startQuiz("Economy"));
        politicsButton.addEventListener('click', () => startQuiz("Politics"));
        historyButton.addEventListener('click', () => startQuiz("History"));
        geographyButton.addEventListener('click', () => startQuiz("Geography"));

        // Initialize the quiz (show subject selection) when the page loads
        window.onload = initQuiz;
    </script>
</body>
</html>
